<?xml version="1.0"?>
<launch>
  
<!-- ===================================================================================== -->
<!-- |    Lauch file to start Gazebo with an IIWA 14 using velocity controllers.         | -->
  
<!-- |    It allows to customize the name of the robot, for each robot                   | -->
<!-- |	  its topics will be under a nameespace with the same name as the robot's.       | -->
	  
<!-- |	  One can choose to have a joint trajectory controller or                        | -->
<!-- |    controllers for the single joints, using the "trajectory" argument.            | -->
<!-- ===================================================================================== -->
  
  <arg name="robot_name" default="iiwa" />
  <arg name="trajectory" default="true"/>
  
  <!-- Loads the Gazebo world. -->
  <include file="$(find iiwa_gazebo)/launch/iiwa14_world.launch">
    <arg name="hardware_interface" value="VelocityJointInterface" />
    <arg name="robot_name" value="$(arg robot_name)" />
  </include>
  
  <!-- Spawn controllers - it uses a JointTrajectoryController -->
  <group if="$(arg trajectory)">
    
    <include file="$(find iiwa_control)/launch/iiwa14_control.launch">
      <arg name="hardware_interface" value="VelocityJointInterface" />
      <arg name="controllers" value="joint_state_controller
	   vel_joint_trajectory_controller" />
      <arg name="robot_name" value="$(arg robot_name)" />
    </include>
    
  </group>
  
  <!-- Spawn controllers - it uses a Velocity Controller for each joint -->
  <group unless="$(arg trajectory)">
    
    <include file="$(find iiwa_control)/launch/iiwa14_control.launch">
      <arg name="hardware_interface" value="VelocityJointInterface" />
      <arg name="controllers" value="joint_state_controller
	   iiwa_joint_1_forward_vel_controller
	   iiwa_joint_2_forward_vel_controller
	   iiwa_joint_3_forward_vel_controller
	   iiwa_joint_4_forward_vel_controller
	   iiwa_joint_5_forward_vel_controller
	   iiwa_joint_6_forward_vel_controller
	   iiwa_joint_7_forward_vel_controller"/>
      <arg name="robot_name" value="iiwa" />
    </include>
    
  </group>
  
  
</launch>
