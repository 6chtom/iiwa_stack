<?xml version="1.0"?>
<launch>
  
<!-- ===================================================================================== -->
<!-- |    Lauch file to start Gazebo with an IIWA 14 using position controllers.         | -->
  
<!-- |    It allows to customize the name of the robot, for each robot                   | -->
<!-- |	  its topics will be under a nameespace with the same name as the robot's.       | -->
	  
<!-- |	  One can choose to have a joint trajectory controller or                        | -->
<!-- |    controllers for the single joints, using the "trajectory" argument.            | -->
<!-- ===================================================================================== -->
  
  <arg name="robot_name" default="iiwa" />
  <arg name="flange" default="basic" />
  <arg name="trajectory" default="true"/>
  
    <!--
  One could also parametrize the model of the iiwa,
  but this file is specifically for the iiwa7 model.
  
  <arg name="model" default="iiwa7"/> 
  -->
  
  <!-- Loads the Gazebo world. -->
  <include file="$(find iiwa_gazebo)/launch/iiwa_world.launch">
    <arg name="hardware_interface" value="PositionJointInterface" />
    <arg name="robot_name" value="$(arg robot_name)" />
    <arg name="flange" value="$(arg flange)" />
    <arg name="model" value="iiwa7" />
  </include>
  
  <!-- Spawn controllers - it uses a JointTrajectoryController -->
  <group if="$(arg trajectory)">
    
    <include file="$(find iiwa_control)/launch/iiwa_control.launch">
      <arg name="hardware_interface" value="PositionJointInterface" />
      <arg name="controllers" value="joint_state_controller
	   pos_joint_trajectory_controller" />
      <arg name="robot_name" value="$(arg robot_name)" />
      <arg name="model" value="iiwa7" />
    </include>
    
  </group>
  
  <!-- Spawn controllers - it uses a JointPositionController for each joint -->
  <group unless="$(arg trajectory)">
    
    <include file="$(find iiwa_control)/launch/iiwa_control.launch">
      <arg name="hardware_interface" value="PositionJointInterface" />
      <arg name="controllers" value="joint_state_controller
	   iiwa_joint_1_forward_pos_controller
	   iiwa_joint_2_forward_pos_controller
	   iiwa_joint_3_forward_pos_controller
	   iiwa_joint_4_forward_pos_controller
	   iiwa_joint_5_forward_pos_controller
	   iiwa_joint_6_forward_pos_controller
	   iiwa_joint_7_forward_pos_controller"/>
      <arg name="robot_name" value="$(arg robot_name)" />
      <arg name="model" value="iiwa7" />
    </include>
    
  </group>
  
  
</launch>
